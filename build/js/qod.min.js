!function(o){o(function(){let e="";o("#new-quote-button").on("click",function(t){t.preventDefault(),e=document.URL,o.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){const t=e[0];console.log(t),history.pushState(null,null,qod_vars.home_url+"/"+t.slug),""!==e[0]._qod_quote_source_url?o(".source").html(`, <a href="${e[0]._qod_quote_source_url}">${e[0]._qod_quote_source}</a>`):o(".source").html(e[0]._qod_quote_source),console.log(e)}).fail(function(o){console.log("an error occurred",o)}),o(window).on("popstate",function(){window.location.replace(e)})}),o("#quote-submission-form").on("submit",function(e){e.preventDefault(),o.ajax({method:"post",url:qod_vars.rest_url+"wp/v2/posts",data:{title:o("#quote-author").val(),content:o("#quote-content").val(),_qod_quote_source:o("#quote-source").val(),_qod_quote_source_url:o("#qoute-source-url").val()},beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(o){console.log(o),alert("Thank you for submitting a new quote")}).fail(function(o){console.log(o),alert("Error")})})})}(jQuery);